<div style="text-align: center; padding: 20px">
  <h1>{{ title }}</h1>

  <!-- Тќ░тбъ -->
  <div
    style="
      margin: 20px auto;
      max-width: 520px;
      padding: 20px;
      border: 1px dashed #7e57c2;
      border-radius: 10px;
      background-color: #f9f9f9;
    "
  >
    <h3 style="color: #7e57c2">Рюе Тќ░тбът░ЈухёТѕљтЊА</h3>

    <input
      [(ngModel)]="newMemberName"
      placeholder="УФІУ╝ИтЁЦтДЊтљЇ"
      style="padding: 10px; border-radius: 5px; border: 1px solid #ddd; width: 200px"
    />

    <button
      (click)="addMember()"
      style="
        padding: 10px 20px;
        background-color: #7e57c2;
        color: white;
        border: none;
        border-radius: 5px;
        margin-left: 10px;
        cursor: pointer;
      "
    >
      тіатЁЦтюўжџі
    </button>
  </div>

  <!-- Тљют░І/Тјњт║Ј/тѕєжаЂ -->
  <div
    style="
      margin: 0 auto 20px;
      max-width: 900px;
      padding: 16px;
      border: 1px solid #eee;
      border-radius: 12px;
      background: #fff;
    "
  >
    <div
      style="
        display: flex;
        gap: 10px;
        justify-content: center;
        flex-wrap: wrap;
        align-items: center;
      "
    >
      <div style="position: relative; display: inline-block">
        <input
          #searchInput
          [ngModel]="highlightTerm"
          (ngModelChange)="onSearchInput($event)"
          (keydown.enter)="onEnterSearch()"
          (keydown.escape)="onEscClear()"
          placeholder="­Ъћј Тљют░І№╝ѕEnter уФІтЇ│Тљют░І / Esc ТИЁжЎц№╝Ѕ"
          style="
            padding: 10px 34px 10px 10px;
            border-radius: 8px;
            border: 1px solid #ddd;
            width: 300px;
            box-sizing: border-box;
          "
        />

        <button
          *ngIf="hasSearch"
          (click)="clearSearch()"
          type="button"
          aria-label="ТИЁжЎцТљют░І"
          style="
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            border: none;
            background: transparent;
            cursor: pointer;
            font-size: 18px;
            line-height: 1;
            color: #666;
            padding: 0;
          "
        >
          ├Ќ
        </button>
      </div>

      <select
        [ngModel]="searchField"
        (ngModelChange)="setSearchField($event)"
        style="padding: 10px; border-radius: 8px; border: 1px solid #ddd"
      >
        <option value="all">Тљют░І№╝џтЁежЃе</option>
        <option value="name">Тљют░І№╝џтДЊтљЇ</option>
        <option value="date">Тљют░І№╝џТюѕС╗й</option>
      </select>

      <select
        [ngModel]="sortMode"
        (ngModelChange)="setSortMode($event)"
        style="padding: 10px; border-radius: 8px; border: 1px solid #ddd"
      >
        <option value="newest">Тјњт║Ј№╝џТќ░тѕ░Уѕі</option>
        <option value="oldest">Тјњт║Ј№╝џУѕітѕ░Тќ░</option>
        <option value="nameAsc">Тјњт║Ј№╝џтљЇтГЌ AРєњZ</option>
      </select>

      <select
        [ngModel]="pageSize"
        (ngModelChange)="setPageSize(+$event)"
        style="padding: 10px; border-radius: 8px; border: 1px solid #ddd"
      >
        <option [value]="4">Т»ЈжаЂ 4</option>
        <option [value]="8">Т»ЈжаЂ 8</option>
        <option [value]="12">Т»ЈжаЂ 12</option>
      </select>

      <button
        *ngIf="hasSearch"
        (click)="clearSearch()"
        style="
          padding: 10px 14px;
          border-radius: 8px;
          border: 1px solid #ddd;
          background: #fafafa;
          cursor: pointer;
        "
      >
        ТИЁжЎц
      </button>
    </div>

    <div
      *ngIf="!loading && (total ?? 0) > 0 && (teamMembers?.length ?? 0) === 0"
      style="margin-top: 10px; text-align: center; color: #999"
    >
      ТЅЙСИЇтѕ░угдтљѕуџёТѕљтЊА
    </div>

    <div *ngIf="errorMsg" style="margin-top: 8px; color: #b00020; text-align: center">
      {{ errorMsg }}
    </div>

    <div
      style="
        margin-top: 12px;
        display: flex;
        justify-content: center;
        gap: 10px;
        align-items: center;
      "
    >
      <button
        (click)="goPrev()"
        [disabled]="page <= 1"
        style="padding: 6px 10px; border-radius: 8px; border: 1px solid #ddd; cursor: pointer"
      >
        РЌђ СИіСИђжаЂ
      </button>

      <div>угг {{ page }} жаЂ / тЁ▒ {{ maxPage }} жаЂ</div>

      <button
        (click)="goNext()"
        [disabled]="page >= maxPage"
        style="padding: 6px 10px; border-radius: 8px; border: 1px solid #ddd; cursor: pointer"
      >
        СИІСИђжаЂ РќХ
      </button>
    </div>

    <div
      *ngIf="!loading && total > 0 && teamMembers.length === 0"
      style="margin-top: 10px; text-align: center; color: #999"
    >
      ТЅЙСИЇтѕ░угдтљѕуџёТѕљтЊА
    </div>
  </div>

  <!-- тѕЌУАе -->
  <div style="display: flex; gap: 20px; justify-content: center; flex-wrap: wrap; padding: 20px">
    <app-user-profile
      *ngFor="let member of teamMembers"
      [id]="member.id"
      [userName]="member.name"
      [joinDate]="member.date"
      [highlightTerm]="highlightTerm"
      [highlightField]="searchField"
      (delete)="deleteMember($event)"
      (edit)="editMember($event)"
      (upgrade)="upgradeMember($event)"
    >
    </app-user-profile>
  </div>
</div>
